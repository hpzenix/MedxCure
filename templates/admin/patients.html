{% extends 'base.html' %}

{% block title %}
Manage Patients
{% endblock %}

{% block content %}
<div class="container-fluid d-flex flex-column vh-100 m-0 p-0">

    {% include 'admin/admin_nav.html' %} 
    
    <div class="flex-grow-1 overflow-auto" style="background-color: #F8F9FA;">
        
        <div class="container-fluid px-5 py-4">
            <h1 class="fw-bolder">Manage Patients</h1>
            <p class="fs-4 text-muted">Add, view, and manage all patients.</p>
        </div>
        
        <div class="container-fluid px-5">
            {% include 'flash_message.html' %}
        </div>

        <div class="container-fluid px-5">
            <div class="row">

                <div class="col-lg-12">

                    <div class="card shadow border-0 rounded-4">
                        <div class="card-header bg-light rounded-top-4 py-3">
                            <h5 class="mb-0 fw-bold">All Patients</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover align-middle">
                                    <thead class="table-light text-center">
                                        <tr>
                                            <th class="">ID</th>
                                            <th class="">Username</th>
                                            <th class="">Name</th>
                                            <th class="">Gender</th>
                                            <th class="">DOB</th>
                                            <th class="">Email</th>
                                            <th class="">Mob No.</th>
                                            <th class="">Height</th>
                                            <th class="">Weight</th>
                                            <th class="">Blood Grp</th>
                                            <th class="">Allergies</th>
                                            <th class="">Med. History</th>
                                            <th class="">Status</th>
                                            <th class="">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody class="text-center">
                                        {% for patient in patients %}
                                        <tr>
                                            <td class="fw-bold">{{ patient.id }}</td>
                                            <td class="fw-medium">{{ patient.username }}</td>
                                            <td class="">{{ patient.name }}</td>
                                            <td class="">{{ patient.gender | capitalize }}</td>
                                            <td class="">{{ patient.dob }}</td>
                                            <td class="">{{ patient.email_id }}</td>
                                            <td class="">{{ patient.mobile_number }}</td>
                                            <td class="">{{ patient.height }}</td>
                                            <td class="">{{ patient.weight }}</td>
                                            <td class="">{{ patient.blood_group }}</td>
                                            <td class="">{{ patient.allergies }}</td>
                                            <td class="">{{ patient.medical_history }}</td>
                                            
                                            <td style="min-width: 180px;">
                                                <div class="btn-group btn-group-sm" role="group">
                                                    <a href="#" 
                                                       class="btn {% if patient.status == 'ACTIVE' %}btn-success{% else %}btn-outline-success{% endif %}">
                                                        Active
                                                    </a>
                                                    <a href="#" 
                                                       class="btn {% if patient.status == 'INACTIVE' %}btn-danger{% else %}btn-outline-danger{% endif %}">
                                                        Inactive
                                                    </a>
                                                </div>
                                            </td>

                                            <td style="min-width: 120px;">
                                                <a href="#" class="btn btn-sm btn-outline-primary rounded-pill">Edit</a>
                                                <a href="#" class="btn btn-sm btn-outline-danger rounded-pill">Delete</a>
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div> 
</div>
{% endblock %}